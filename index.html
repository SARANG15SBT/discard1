<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Protein Database - Synthetic Biology Resource</title>
    <style>
        :root {
            /* Light Theme Variables */
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f8f9fa;
            --text-primary: #333333;
            --text-secondary: #555555;
            --text-muted: #7f8c8d;
            --accent-primary: #2980b9;
            --accent-secondary: #1a5276;
            --accent-hover: #1a5276;
            --border-color: #eaeaea;
            --card-bg: #ffffff;
            --card-shadow: 0 3px 10px rgba(0,0,0,0.08);
            --header-bg: linear-gradient(135deg, #1a5276 0%, #2980b9 100%);
            --nav-bg: #ffffff;
            --footer-bg: #2c3e50;
            --input-bg: #ffffff;
            --sequence-bg: #2c3e50;
            --sequence-text: #ecf0f1;
        }

        [data-theme="dark"] {
            /* Dark Theme Variables - Scientific Blue Theme */
            --bg-primary: #0a192f;
            --bg-secondary: #172a45;
            --bg-tertiary: #0f1e35;
            --text-primary: #e6f1ff;
            --text-secondary: #a8b2d1;
            --text-muted: #8892b0;
            --accent-primary: #3b82f6;
            --accent-secondary: #7c3aed;
            --accent-hover: #7c3aed;
            --border-color: #233554;
            --card-bg: #112240;
            --card-shadow: 0 3px 15px rgba(2, 12, 27, 0.7);
            --header-bg: linear-gradient(135deg, #0a192f 0%, #172a45 100%);
            --nav-bg: #0a192f;
            --footer-bg: #0a192f;
            --input-bg: #172a45;
            --sequence-bg: #1e3a5f;
            --sequence-text: #e6f1ff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
        }
        
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: var(--header-bg);
            color: white;
            padding: 40px 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .logo {
            margin-bottom: 15px;
        }
        
        .logo h1 {
            font-size: 2.8rem;
            font-weight: 700;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }
        
        .logo p {
            font-size: 1.2rem;
            opacity: 0.9;
            font-weight: 300;
        }
        
        nav {
            background-color: var(--nav-bg);
            padding: 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border-bottom: 1px solid var(--border-color);
        }
        
        .nav-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .nav-menu {
            display: flex;
            list-style: none;
        }
        
        .nav-menu li {
            margin: 0;
        }
        
        .nav-menu a {
            display: block;
            padding: 20px 25px;
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .nav-menu a:hover, .nav-menu a.active {
            background-color: var(--bg-tertiary);
            color: var(--accent-primary);
            border-bottom: 3px solid var(--accent-primary);
        }
        
        .hero {
            background: url('https://images.unsplash.com/photo-1532187863486-abf9dbad1b69?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') no-repeat center center/cover;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
            width: 100%;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
            padding: 0 20px;
            text-align: center;
        }
        
        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            text-align: center;
        }
        
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            text-align: center;
        }
        
        .btn {
            display: inline-block;
            background: var(--accent-primary);
            color: white;
            padding: 12px 30px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .btn:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .features {
            padding: 80px 0;
            background-color: var(--bg-secondary);
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .section-title h2 {
            font-size: 2.2rem;
            color: var(--text-primary);
            margin-bottom: 15px;
        }
        
        .section-title p {
            color: var(--text-muted);
            max-width: 700px;
            margin: 0 auto;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .feature-card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-top: 4px solid var(--accent-primary);
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--accent-primary);
            margin-bottom: 20px;
        }
        
        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--text-primary);
        }
        
        .feature-card p {
            color: var(--text-muted);
        }
        
        /* Content pages styling */
        .content-page {
            display: none;
            padding: 40px 0;
            background-color: var(--bg-secondary);
            min-height: 60vh;
        }
        
        .page-content {
            background: var(--bg-secondary);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border: 1px solid var(--border-color);
        }
        
        .page-content h2 {
            color: var(--text-primary);
            margin-bottom: 20px;
            border-bottom: 2px solid var(--accent-primary);
            padding-bottom: 10px;
        }
        
        .page-content h3 {
            color: var(--accent-primary);
            margin: 20px 0 10px;
        }
        
        .page-content p {
            margin-bottom: 15px;
            line-height: 1.6;
            color: var(--text-secondary);
        }
        
        .page-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .page-content li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }
        
        /* Search section styling */
        .search_bgcolor {
            background-color: var(--bg-tertiary);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
        }
        
        .mainContentTitle {
            font-size: 18px;
            font-weight: bold;
            color: var(--text-primary);
        }
        
        .search-form {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .search-input, .filter-select {
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
            transition: border 0.3s;
            background-color: var(--input-bg);
            color: var(--text-primary);
        }
        
        .search-input:focus, .filter-select:focus {
            border-color: var(--accent-primary);
            outline: none;
        }
        
        .search-input {
            flex: 1;
        }
        
        .search-button {
            background-color: var(--accent-primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
        }
        
        .search-button:hover {
            background-color: var(--accent-hover);
        }
        
        /* Advanced search */
        .advanced-search {
            margin-top: 20px;
            padding: 20px;
            background-color: var(--bg-tertiary);
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        
        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        
        .filter-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .search-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        
        .btn-secondary {
            background-color: var(--text-muted);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .btn-secondary:hover {
            background-color: var(--text-secondary);
        }
        
        /* Protein cards styling */
        .protein-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .protein-card {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            border: 1px solid var(--border-color);
        }
        
        .protein-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }
        
        .card-image {
            height: 180px;
            overflow: hidden;
            background: var(--bg-tertiary);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .card-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }
        
        .card-content {
            padding: 20px;
        }
        
        .card-content h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .protein-meta {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin: 15px 0;
            font-size: 13px;
        }
        
        .meta-item strong {
            color: var(--text-primary);
        }
        
        .meta-item span {
            color: var(--text-secondary);
        }
        
        .view-btn {
            background-color: var(--accent-primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
            font-weight: 500;
            transition: background 0.3s;
        }
        
        .view-btn:hover {
            background-color: var(--accent-hover);
        }
        
        /* Statistics section */
        .stats-section {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            margin: 30px 0;
            border: 1px solid var(--border-color);
        }
        
        .stats-section h2 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--text-primary);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .stat-box {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid var(--border-color);
            transition: transform 0.3s;
        }
        
        .stat-box:hover {
            transform: translateY(-5px);
        }
        
        .stat-box h3 {
            font-size: 28px;
            color: var(--accent-primary);
            margin-bottom: 10px;
        }
        
        .stat-box p {
            color: var(--text-secondary);
        }
        
        /* Protein detail page */
        .protein-page {
            display: none;
            padding: 40px 0;
            background-color: var(--bg-secondary);
            min-height: 80vh;
        }
        
        .back-btn {
            background-color: var(--text-muted);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: background 0.3s;
        }
        
        .back-btn:hover {
            background-color: var(--text-secondary);
        }
        
        .protein-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .protein-header h2 {
            font-size: 32px;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        
        .protein-header p {
            color: var(--text-secondary);
        }
        
        .protein-details {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .detail-item {
            padding: 15px;
            background: var(--bg-tertiary);
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        
        .detail-item strong {
            display: block;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .detail-item span {
            color: var(--text-secondary);
        }
        
        .sequence-section {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
        }
        
        .sequence-box {
            background: var(--sequence-bg);
            color: var(--sequence-text);
            padding: 15px;
            border-radius: 6px;
            font-family: monospace;
            overflow-x: auto;
            white-space: pre-wrap;
            word-break: break-all;
            margin-top: 10px;
            font-size: 13px;
            line-height: 1.4;
        }
        
        /* Search results */
        .search-results {
            margin-top: 30px;
        }
        
        .results-count {
            margin-bottom: 20px;
            color: var(--text-muted);
            font-size: 16px;
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: var(--text-muted);
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 16px;
            color: var(--text-muted);
        }
        
        .spinner {
            border: 4px solid var(--bg-tertiary);
            border-top: 4px solid var(--accent-primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            color: #e74c3c;
            text-align: center;
            padding: 30px;
            background: #fdf2f2;
            border-radius: 6px;
            border: 1px solid #f5c6cb;
        }
        
        /* NEW: Browse page improvements */
        .browse-intro {
            text-align: center;
            padding: 60px 20px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            margin: 30px 0;
            border: 1px solid var(--border-color);
        }
        
        .browse-intro h3 {
            color: var(--text-primary);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .browse-intro p {
            color: var(--text-muted);
            max-width: 600px;
            margin: 0 auto 20px;
            font-size: 1.1rem;
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .results-info {
            flex: 1;
        }
        
        .results-info h3 {
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .search-criteria {
            color: var(--text-muted);
            font-size: 14px;
        }
        
        .results-actions {
            display: flex;
            gap: 10px;
        }
        
        .sort-options {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
        }
        
        .sort-btn {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            color: var(--text-primary);
        }
        
        .sort-btn.active, .sort-btn:hover {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }
        
        /* Theme Toggle Button */
        .theme-toggle {
            position: fixed;
            bottom: 60px;
            right: 20px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 5px;
            display: flex;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .theme-btn {
            background: none;
            border: none;
            padding: 8px 10px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .theme-btn.active {
            background: var(--accent-primary);
            color: white;
        }
        
        .theme-divider {
            width: 1px;
            height: 20px;
            background: var(--border-color);
            margin: 0 2px;
        }
        
        /* Publications Page Styles */
        .publications-list {
            margin: 30px 0;
        }

        .publication-item {
            display: flex;
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid var(--border-color);
        }

        .publication-item:last-child {
            border-bottom: none;
        }

        .pub-number {
            font-weight: bold;
            color: var(--accent-primary);
            font-size: 16px;
            min-width: 40px;
            margin-right: 15px;
        }

        .pub-content {
            flex: 1;
        }

        .pub-title {
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 5px;
            line-height: 1.4;
        }

        .pub-journal {
            color: var(--text-muted);
            font-size: 14px;
            line-height: 1.4;
        }

        .filter-section {
            margin: 25px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-btn {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            padding: 10px 18px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: var(--text-primary);
        }

        .filter-btn.active, .filter-btn:hover {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .resources-section {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid var(--accent-primary);
        }

        .resources-section h3 {
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        
        /* Debug panel */
        .debug-panel {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 1000;
            max-width: 300px;
            display: none;
        }
        
        .debug-toggle {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: var(--accent-primary);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            z-index: 1001;
            font-size: 12px;
        }
        
        footer {
            background: var(--footer-bg);
            color: white;
            padding: 50px 0 20px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-column h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }
        
        .footer-column h3::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 40px;
            height: 2px;
            background: var(--accent-primary);
        }
        
        .footer-column p, .footer-column a {
            color: #bdc3c7;
            margin-bottom: 10px;
            display: block;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-column a:hover {
            color: var(--accent-primary);
        }
        
        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #34495e;
            color: #bdc3c7;
            font-size: 0.9rem;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .protein-cards {
                grid-template-columns: 1fr;
            }
            
            .filter-grid {
                grid-template-columns: 1fr;
            }
            
            .search-form {
                flex-direction: column;
            }
            
            .nav-menu {
                flex-wrap: wrap;
            }
            
            .logo h1 {
                font-size: 2.2rem;
            }
            
            .hero h2 {
                font-size: 2rem;
            }

            /* Responsive design for publications */
            .publication-item {
                flex-direction: column;
            }
            
            .pub-number {
                margin-bottom: 5px;
                margin-right: 0;
            }
            
            .filter-section {
                justify-content: center;
            }
            
            .filter-btn {
                flex: 1;
                min-width: 120px;
                text-align: center;
            }
            
            .nav-menu a {
                padding: 15px;
                text-align: center;
                border-bottom: 1px solid var(--border-color);
            }
            
            .results-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .sort-options {
                flex-wrap: wrap;
            }
            
            .theme-toggle {
                bottom: 50px;
                right: 10px;
            }
        }
    </style>
</head>
<body data-theme="dark">
    <!-- Theme Toggle Button -->
    <div class="theme-toggle" id="themeToggle">
        <button class="theme-btn" id="lightThemeBtn" title="Light Theme">‚òÄÔ∏è</button>
        <div class="theme-divider"></div>
        <button class="theme-btn active" id="darkThemeBtn" title="Dark Theme">üåô</button>
    </div>

    <!-- Debug Toggle -->
    <button class="debug-toggle" onclick="toggleDebug()">Debug</button>
    <div class="debug-panel" id="debug-panel">
        <strong>Debug Information:</strong>
        <div id="debug-info">Loading...</div>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo">
                <h1>Deep Protein Database</h1>
                <p>A Synthetic Biology Resource for Engineered Proteins</p>
            </div>
        </div>
    </header>
    
    <!-- Navigation -->
    <nav>
        <div class="container nav-container">
            <ul class="nav-menu">
                <li><a href="#" class="active" onclick="showHomePage(); return false;">Home</a></li>
                <li><a href="#" onclick="showAdvancedSearchPage(); return false;">Browse</a></li>
                <li><a href="#" onclick="showDesignMethodsPage(); return false;">Design Methods</a></li>
                <li><a href="#" onclick="showPublicationsPage(); return false;">Publications</a></li>
                <li><a href="#" onclick="showContactPage(); return false;">Contact</a></li>
            </ul>
        </div>
    </nav>
    
    <!-- Hero Section (Home Page) -->
    <section class="hero" id="hero-section">
        <div class="hero-content">
            <h2>Advancing Synthetic Biology Through Protein Engineering</h2>
            <p>Access our comprehensive database of engineered proteins, design tools, and research publications.</p>
            <a href="#" class="btn" onclick="showAdvancedSearchPage(); return false;">Explore Database</a>
        </div>
    </section>
    
    <!-- Features Section (Home Page) -->
    <section class="features" id="features-section">
        <div class="container">
            <div class="section-title">
                <h2>Database Features</h2>
                <p>Our platform provides researchers with powerful tools and resources for protein engineering and synthetic biology applications.</p>
            </div>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üîç</div>
                    <h3>Advanced Search</h3>
                    <p>Find proteins by sequence, structure, function, or organism with our powerful search tools.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üß¨</div>
                    <h3>Protein Design</h3>
                    <p>Access cutting-edge methods for designing novel proteins with desired functions.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h3>Data Analysis</h3>
                    <p>Visualize and analyze protein structures, sequences, and functional annotations.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content Pages -->
    <div class="container">
        <!-- Advanced Search Page -->
        <div id="advanced-search-page" class="content-page">
            <div class="page-content">
                <h2>Advanced Protein Search</h2>
                <p>Use the filters below to find specific proteins in our database. Proteins will only be displayed after you apply search criteria or filters.</p>
                
                <div class="search_bgcolor">
                    <form id="searchForm" class="search-form">
                        <input type="text" id="searchInput" class="search-input" placeholder="Search by Protein ID, Gene Type or Organism...">
                        <button type="submit" class="search-button">Search</button>
                    </form>
                    
                    <div class="advanced-search">
                        <h3>Advanced Filters</h3>
                        <div class="filter-grid">
                            <div class="filter-group">
                                <label for="geneTypeFilter">Gene Type</label>
                                <select id="geneTypeFilter" class="filter-select">
                                    <option value="">All Gene Types</option>
                                    <option value="Reverse">Reverse</option>
                                    <option value="Antisense">Antisense</option>
                                    <option value="Reverse-antisense">Reverse-antisense</option>
                                    <option value="Intergenic">Intergenic</option>
                                    <option value="rRNA">rRNA</option>
                                    <option value="tRNA">tRNA</option>
                                    <option value="snRNA">snRNA</option>
                                    <option value="snoRNA">snoRNA</option>
                                    <option value="Pseudogene">Pseudogene</option>
                                    <option value="miRNA">miRNA</option>
                                </select>
                            </div>
                            
                            <div class="filter-group">
                                <label for="organismFilter">Organism</label>
                                <select id="organismFilter" class="filter-select">
                                    <option value="">All Organisms</option>
                                    <option value="Escherichia coli">Escherichia coli</option>
                                    <option value="Saccharomyces cerevisiae">Saccharomyces cerevisiae</option>
                                    <option value="Caenorhabditis elegans">Caenorhabditis elegans</option>
                                    <option value="Drosophilla melanogaster">Drosophilla melanogaster</option>
                                    <option value="Arabidopsis thaliana">Arabidopsis thaliana</option>
                                    <option value="Mus musculus">Mus musculus</option>
                                    <option value="Homo sapiens">Homo sapiens</option> 
                                </select>
                            </div>
                        </div>
                        
                        <div class="search-actions">
                            <button type="button" class="btn-secondary" onclick="clearSearch()">Clear Filters</button>
                            <button type="button" class="search-button" onclick="performSearch()">Apply Filters</button>
                        </div>
                    </div>
                </div>
                
                <!-- Browse Intro Section (shown by default) -->
                <div class="browse-intro" id="browse-intro">
                    <h3>Discover proteins by searching or filtering</h3>
                    <p>Use the search bar and filters above to find specific proteins in our database. You can search by protein ID, gene type, organism, or use the advanced filters to narrow down your results.</p>
                    <p>Proteins will be displayed here once you apply your search criteria.</p>
                </div>
                
                <!-- Search Results Section -->
                <div class="search-results" id="search-results" style="display: none;">
                    <div class="results-header">
                        <div class="results-info">
                            <h3 id="results-title">Search Results</h3>
                            <div class="search-criteria" id="search-criteria"></div>
                            <div class="results-count" id="results-count"></div>
                        </div>
                        <div class="results-actions">
                            <button class="btn-secondary" onclick="clearSearch()">New Search</button>
                        </div>
                    </div>
                    
                    <div class="sort-options">
                        <span>Sort by:</span>
                        <button class="sort-btn active" data-sort="name" onclick="sortResults('name')">Name</button>
                    </div>
                    
                    <div class="protein-cards" id="search-results-list">
                        <!-- Search results will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Design Methods Page -->
        <div id="design-methods-page" class="content-page">
            <div class="page-content">
                <h2>Design Methods for Dark Proteins</h2>
                <p>Dark proteins represent a new frontier in synthetic biology, where we engineer functional proteins from genomic regions traditionally considered non-coding. Our approach combines computational biology, machine learning, and experimental validation to design and characterize these novel proteins.</p>
                
                <h3>Computational Design Pipeline</h3>
                <p>Our computational pipeline for dark protein design involves several key steps:</p>
                <ul>
                    <li><strong>Genomic Mining:</strong> Identification of potential coding regions in non-coding DNA using advanced algorithms</li>
                    <li><strong>Sequence Optimization:</strong> Codon optimization and sequence refinement for improved expression and stability</li>
                    <li><strong>Structure Prediction:</strong> AI-driven protein structure prediction to assess foldability and function</li>
                    <li><strong>Functional Annotation:</strong> Prediction of potential biological functions based on sequence and structural features</li>
                </ul>
                
                <h3>Bioinformatics Tools</h3>
                <p>We employ a suite of bioinformatics tools for dark protein analysis:</p>
                <ul>
                    <li><strong>Dark Gene Finder:</strong> Custom algorithm for identifying potential protein-coding regions in non-coding sequences</li>
                    <li><strong>Protein Fold AI:</strong> Machine learning approach for accurate protein structure prediction</li>
                    <li><strong>Function Predictor:</strong> Tool for annotating potential biological functions based on sequence motifs and structural features</li>
                    <li><strong>Stability Calculator:</strong> Algorithm for predicting protein stability under various conditions</li>
                </ul>
                
                <h3>Experimental Validation</h3>
                <p>Computational predictions are validated through experimental approaches:</p>
                <ul>
                    <li><strong>Heterologous Expression:</strong> Production of dark proteins in bacterial and eukaryotic systems</li>
                    <li><strong>Biophysical Characterization:</strong> Analysis of protein stability, solubility, and folding</li>
                    <li><strong>Functional Assays:</strong> Testing of predicted biological activities</li>
                    <li><strong>Structural Determination:</strong> X-ray crystallography and cryo-EM for high-resolution structure determination</li>
                </ul>
            </div>
        </div>
        
        <!-- Publications Page -->
        <div id="publications-page" class="content-page">
            <div class="page-content">
                <h2>Publications</h2>
                <p>Our research on dark proteins, synthetic biology, and computational biology has been published in leading scientific journals. Below are our key publications:</p>
                
                <div class="filter-section">
                    <button class="filter-btn active" data-filter="all">All Publications</button>
                    <button class="filter-btn" data-filter="recent">Recent Work</button>
                    <button class="filter-btn" data-filter="tREP">tREP Research</button>
                    <button class="filter-btn" data-filter="dark-genome">Dark Genome</button>
                    <button class="filter-btn" data-filter="synthetic-biology">Synthetic Biology</button>
                </div>
                
                <div class="publications-list">
                    <div class="publication-item" data-category="recent tREP">
                        <div class="pub-number">22.</div>
                        <div class="pub-content">
                            <div class="pub-title">Computational prediction of potential vaccine candidates from tRNA-encoded peptides (tREP) using a bioinformatic workflow and molecular dynamics validations</div>
                            <div class="pub-journal">IEEE/ACM Transactions on Computational Biology and Bioinformatics 2024: Mar 1, 1-12 (Shanthappa et al)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="dark-genome">
                        <div class="pub-number">21.</div>
                        <div class="pub-content">
                            <div class="pub-title">Repurposing The Dark Genome. II - Reverse Proteins</div>
                            <div class="pub-journal">BioRXiv 2023 (Nayak & Dhar)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="dark-genome">
                        <div class="pub-number">20.</div>
                        <div class="pub-content">
                            <div class="pub-title">Repurposing The Dark Genome. I - Antisense proteins</div>
                            <div class="pub-journal">BioRXiv 2023 (Garg & Dhar)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="tREP">
                        <div class="pub-number">19.</div>
                        <div class="pub-content">
                            <div class="pub-title">tREPs - a new class of functional tRNA encoded peptides</div>
                            <div class="pub-journal">ACS Omega 2022, 7, 22, 18361‚Äì18373 (Chakrabarti A et al)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="synthetic-biology">
                        <div class="pub-number">18.</div>
                        <div class="pub-content">
                            <div class="pub-title">Building Biofoundry India: Challenges and Path Forward</div>
                            <div class="pub-journal">Synth. Biol (Oxf) 2021, 6(1):ysab015 (Panda & Dhar)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="synthetic-biology">
                        <div class="pub-number">17.</div>
                        <div class="pub-content">
                            <div class="pub-title">Exploring the potential of genome editing CRISPR-Cas9 technology</div>
                            <div class="pub-journal">Gene. 2017: 599, 1-18 (Singh V et al)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="computational-biology">
                        <div class="pub-number">16.</div>
                        <div class="pub-content">
                            <div class="pub-title">Novel group-based QSAR and combinatorial design of CK-1Œ¥ inhibitors as neuroprotective agents</div>
                            <div class="pub-journal">BMC Bioinformatics. 2016: 17(Suppl 19):515 (Joshi K et al)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="synthetic-biology">
                        <div class="pub-number">15.</div>
                        <div class="pub-content">
                            <div class="pub-title">Systems and Synthetic Biology</div>
                            <div class="pub-journal">Springer, 2015, Singh & Dhar</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="dark-genome">
                        <div class="pub-number">14.</div>
                        <div class="pub-content">
                            <div class="pub-title">Functional Annotation of Novel Peptides Generated from the non-expressing genome of D. melanogaster</div>
                            <div class="pub-journal">Bioinformation 2017: 13(1):17-20 (Varughese D et al)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="dark-genome">
                        <div class="pub-number">13.</div>
                        <div class="pub-content">
                            <div class="pub-title">Making novel proteins from pseudogenes</div>
                            <div class="pub-journal">Bioinformatics. 2015: 31(1):33-9 (Shidhi PR et al)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="computational-biology">
                        <div class="pub-number">12.</div>
                        <div class="pub-content">
                            <div class="pub-title">In silico study of peptide inhibitors against BACE</div>
                            <div class="pub-journal">Sys. Synth.Biol. J. 2015 9: 67-72 (Raj N et al)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="computational-biology">
                        <div class="pub-number">11.</div>
                        <div class="pub-content">
                            <div class="pub-title">Computational identification of novel microRNAs and their targets in the malarial vector A. stephensi</div>
                            <div class="pub-journal">Sys & Synth.Biol J 2015: 9: 11-7 (Krishnan R et al)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="synthetic-biology">
                        <div class="pub-number">10.</div>
                        <div class="pub-content">
                            <div class="pub-title">Metabolic Engineering of Biosynthetic Pathway for Production of Renewable biofuels</div>
                            <div class="pub-journal">Appl Biochem Biotechnol 2014: 172, 1158-1171 (Singh V et al)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="dark-genome">
                        <div class="pub-number">9.</div>
                        <div class="pub-content">
                            <div class="pub-title">Discovering Novel Anti-Malarial peptides from the Non-coding genome - A Working Hypothesis</div>
                            <div class="pub-journal">Curr Synth Sys Biol 2013, 1:1 (Joshi M et al)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="synthetic-biology">
                        <div class="pub-number">8.</div>
                        <div class="pub-content">
                            <div class="pub-title">Synthetic biology and biomediated synthesis of organic chemicals</div>
                            <div class="pub-journal">IUPAC technical report, 2013 (Dhar PK)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="synthetic-biology">
                        <div class="pub-number">7.</div>
                        <div class="pub-content">
                            <div class="pub-title">Will recombinant DNA technology become obsolete?</div>
                            <div class="pub-journal">Nature India, Dec 2012 (Dhar PK)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="synthetic-biology">
                        <div class="pub-number">6.</div>
                        <div class="pub-content">
                            <div class="pub-title">Emerging trends in synthetic biology</div>
                            <div class="pub-journal">US National Academies of Sciences, 2011 (Dhar PK)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="synthetic-biology">
                        <div class="pub-number">5.</div>
                        <div class="pub-content">
                            <div class="pub-title">Synthetic Biology in India and Japan</div>
                            <div class="pub-journal">European Science Commission meeting, Brussels, 2010 (Dhar PK)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="synthetic-biology">
                        <div class="pub-number">4.</div>
                        <div class="pub-content">
                            <div class="pub-title">Hacking the genetic code</div>
                            <div class="pub-journal">Nature India, Aug 2011 (Dhar PK)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="synthetic-biology">
                        <div class="pub-number">3.</div>
                        <div class="pub-content">
                            <div class="pub-title">Making a genome</div>
                            <div class="pub-journal">Nature India, April 2011 (Dhar PK)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="synthetic-biology">
                        <div class="pub-number">2.</div>
                        <div class="pub-content">
                            <div class="pub-title">Building momentum for systems and synthetic biology in India</div>
                            <div class="pub-journal">Sys Syn Biol, 2010: 4, 237-40 (Krishnan R et al)</div>
                        </div>
                    </div>
                    
                    <div class="publication-item" data-category="synthetic-biology">
                        <div class="pub-number">1.</div>
                        <div class="pub-content">
                            <div class="pub-title">Synthesizing non-natural parts from natural genomic template</div>
                            <div class="pub-journal">J. Biol. Engg, 2009: 3, 2 (Dhar PK et al)</div>
                        </div>
                    </div>
                </div>
                
                <div class="resources-section">
                    <h3>Additional Resources</h3>
                    <p>For a complete list of publications from our lab, please visit our <a href="#">Google Scholar profile</a> or contact us directly.</p>
                </div>
            </div>
        </div>
        
        <!-- Contact Page -->
        <div id="contact-page" class="content-page">
            <div class="page-content">
                <h2>Contact Us</h2>
                <p>We welcome collaborations, data submissions, and inquiries about the Deep Protein Database. Please feel free to reach out to us using the information below.</p>
                
                <h3>Laboratory Information</h3>
                <p><strong>Synthetic Biology and Protein Engineering Lab</strong><br>
                School of Biotechnology<br>
                Jawaharlal Nehru University<br>
                New Delhi 110067<br>
                India</p>
                                            
                <h3>Collaborations</h3>
                <p>We are actively seeking collaborations with research groups interested in:</p>
                <ul>
                    <li>Characterizing novel dark proteins</li>
                    <li>Developing computational tools for protein design</li>
                    <li>Exploring therapeutic applications of dark proteins</li>
                    <li>Expanding the database with new organisms and protein types</li>
                </ul>
                
                <h3>Data Submission</h3>
                <p>If you have data on dark proteins that you would like to contribute to our database, please contact us with a description of your data and we will provide instructions for submission.</p>
            </div>
        </div>
        
        <!-- Protein Detail Page -->
        <div class="protein-page" id="protein-page">
            <button class="back-btn" onclick="showAdvancedSearchPage()">‚Üê Back to Search</button>
            <div class="protein-header">
                <h2 id="protein-id">Protein ID</h2>
                <p id="protein-description">Protein Description</p>
            </div>
            
            <div class="protein-details">
                <h3 style="margin-bottom: 15px;">Protein Information</h3>
                <div class="detail-grid" id="protein-details-grid">
                    <!-- Protein details will be loaded here -->
                </div>
            </div>
            
            <div class="sequence-section">
                <h3 style="margin-bottom: 15px;">Sequences</h3>
                <div class="detail-item">
                    <strong>Original Gene Sequence</strong>
                    <div class="sequence-box" id="original-sequence"></div>
                </div>
                <div class="detail-item">
                    <strong>Dark Gene Sequence</strong>
                    <div class="sequence-box" id="dark-sequence"></div>
                </div>
                <div class="detail-item">
                    <strong>Protein Sequence</strong>
                    <div class="sequence-box" id="protein-sequence"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Deep Protein Database</h3>
                    <p>A comprehensive resource for engineered proteins and synthetic biology tools.</p>
                </div>
                
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <a href="#" onclick="showHomePage(); return false;">Home</a>
                    <a href="#" onclick="showAdvancedSearchPage(); return false;">Browse Database</a>
                    <a href="#" onclick="showDesignMethodsPage(); return false;">Design Tools</a>
                    <a href="#" onclick="showPublicationsPage(); return false;">Publications</a>
                    <a href="#" onclick="showContactPage(); return false;">Contact Us</a>
                </div>
                
                <div class="footer-column">
                    <h3>Resources</h3>
                    <a href="#">Documentation</a>
                    <a href="#">Tutorials</a>
                    <a href="#">API Access</a>
                    <a href="#">Data Submission</a>
                </div>
                
                <div class="footer-column">
                    <h3>Contact</h3>
                    <p>Email: info@deepproteindb.org</p>
                    <p>Phone: +19 90903 09398</p>
                    <p>Address: Synthetic Biology Lab, SBT, JNU, New Delhi, India</p>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 Deep Protein Database|v1.0. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Theme Toggle Functionality
        function initializeTheme() {
            const themeToggle = document.getElementById('themeToggle');
            const lightThemeBtn = document.getElementById('lightThemeBtn');
            const darkThemeBtn = document.getElementById('darkThemeBtn');
            const body = document.body;
            
            // Check for saved theme preference or default to dark
            const savedTheme = localStorage.getItem('theme') || 'dark';
            setTheme(savedTheme);
            
            // Light theme button click
            lightThemeBtn.addEventListener('click', () => {
                setTheme('light');
            });
            
            // Dark theme button click
            darkThemeBtn.addEventListener('click', () => {
                setTheme('dark');
            });
            
            function setTheme(theme) {
                body.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
                
                // Update button states
                if (theme === 'light') {
                    lightThemeBtn.classList.add('active');
                    darkThemeBtn.classList.remove('active');
                } else {
                    darkThemeBtn.classList.add('active');
                    lightThemeBtn.classList.remove('active');
                }
            }
        }

        // Global variables
        let proteinData = [];
        let currentProtein = '';
        let currentPage = 'home';
        let currentResults = [];
        let currentSort = 'name';

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing application...');
            updateDebugInfo('Application starting...');
            initializeTheme();
            loadProteinData();
            setupRouting();
            setupSearchForm();
            setupFilterListeners();
            setupPublicationFilters();
        });

        // Debug functions
        function toggleDebug() {
            const panel = document.getElementById('debug-panel');
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
        }

        function updateDebugInfo(message) {
            const debugInfo = document.getElementById('debug-info');
            const timestamp = new Date().toLocaleTimeString();
            debugInfo.innerHTML = `[${timestamp}] ${message}<br>${debugInfo.innerHTML}`;
        }

        // Setup search form event listeners
        function setupSearchForm() {
            const searchForm = document.getElementById('searchForm');
            if (searchForm) {
                searchForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    performSearch();
                });
            }
        }

        // Setup filter change listeners for real-time filtering
        function setupFilterListeners() {
            const geneTypeFilter = document.getElementById('geneTypeFilter');
            const organismFilter = document.getElementById('organismFilter');
            const searchInput = document.getElementById('searchInput');
            
            if (geneTypeFilter) {
                geneTypeFilter.addEventListener('change', performSearch);
            }
            
            if (organismFilter) {
                organismFilter.addEventListener('change', performSearch);
            }
            
            if (searchInput) {
                searchInput.addEventListener('input', performSearch);
            }
        }

        // Setup publication filters
        function setupPublicationFilters() {
            const filterBtns = document.querySelectorAll('.filter-btn');
            const publicationItems = document.querySelectorAll('.publication-item');
            
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterBtns.forEach(b => b.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    
                    publicationItems.forEach(item => {
                        if (filter === 'all') {
                            item.style.display = 'flex';
                        } else {
                            const categories = item.getAttribute('data-category').split(' ');
                            if (categories.includes(filter)) {
                                item.style.display = 'flex';
                            } else {
                                item.style.display = 'none';
                            }
                        }
                    });
                });
            });
        }

        // Load protein data from external JSON file
        async function loadProteinData() {
            try {
                updateDebugInfo('Loading proteins.json...');
                const response = await fetch('proteins.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                proteinData = data;
                
                console.log('Protein data loaded:', proteinData.length, 'entries');
                updateDebugInfo(`Protein data loaded: ${data.length} entries`);
                
            } catch (error) {
                console.error('Error loading protein data:', error);
                updateDebugInfo(`ERROR: ${error.message}`);
                showError('Failed to load protein data. Check console for details.');
            }
        }

        // Perform advanced search
        function performSearch() {
            updateDebugInfo('Performing search...');
            
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            const geneType = document.getElementById('geneTypeFilter').value;
            const organism = document.getElementById('organismFilter').value;

            console.log('Search criteria:', { searchTerm, geneType, organism });

            // If no search criteria, show intro
            if (!searchTerm && !geneType && !organism) {
                document.getElementById('browse-intro').style.display = 'block';
                document.getElementById('search-results').style.display = 'none';
                return;
            }

            // Hide intro, show search results
            document.getElementById('browse-intro').style.display = 'none';
            const searchResults = document.getElementById('search-results');
            searchResults.style.display = 'block';

            // Show loading state
            const resultsList = document.getElementById('search-results-list');
            resultsList.innerHTML = '<div class="loading"><div class="spinner"></div><p>Searching proteins...</p></div>';

            // Update search criteria display
            updateSearchCriteriaDisplay(searchTerm, geneType, organism);

            // Perform search
            setTimeout(() => {
                const results = filterProteins(searchTerm, geneType, organism);
                currentResults = results;
                displaySearchResults(results);
            }, 300);
        }

        // Update search criteria display
        function updateSearchCriteriaDisplay(searchTerm, geneType, organism) {
            const criteriaElement = document.getElementById('search-criteria');
            let criteriaText = '';
            
            if (searchTerm) {
                criteriaText += `Search: "${searchTerm}"`;
            }
            
            if (geneType) {
                if (criteriaText) criteriaText += ' ‚Ä¢ ';
                criteriaText += `Gene Type: ${geneType}`;
            }
            
            if (organism) {
                if (criteriaText) criteriaText += ' ‚Ä¢ ';
                criteriaText += `Organism: ${organism}`;
            }
            
            criteriaElement.textContent = criteriaText;
        }

        // Filter proteins based on search criteria
        function filterProteins(searchTerm, geneType, organism) {
            const results = [];
            
            proteinData.forEach(protein => {
                let matches = true;

                // Text search across multiple fields
                if (searchTerm) {
                    const searchableText = [
                        protein.Protein_ID || '',
                        protein.Taxonomic_Name || '',
                        protein.NCBI_Gene_Symbol || '',
                        protein.Gene_Type || ''
                    ].join(' ').toLowerCase();

                    if (!searchableText.includes(searchTerm)) {
                        matches = false;
                    }
                }

                // Gene Type filter
                if (geneType && protein.Gene_Type !== geneType) {
                    matches = false;
                }

                // Organism filter
                if (organism && protein.Taxonomic_Name !== organism) {
                    matches = false;
                }

                if (matches) {
                    results.push(protein);
                }
            });

            return results;
        }

        // Display search results
        function displaySearchResults(results) {
            const resultsCount = document.getElementById('results-count');
            const resultsList = document.getElementById('search-results-list');

            if (results.length === 0) {
                resultsCount.innerHTML = 'No proteins found matching your search criteria.';
                resultsList.innerHTML = '<div class="no-results">Try adjusting your search filters or search terms.</div>';
                updateDebugInfo('Search: 0 results found');
                return;
            }

            resultsCount.innerHTML = `Found ${results.length} protein${results.length === 1 ? '' : 's'}`;
            
            // Sort by name by default
            const sortedResults = sortProteins(results, 'name');
            renderProteinList(sortedResults, 'search-results-list');
            updateDebugInfo(`Search: ${results.length} results found`);
        }

        // Render protein list
        function renderProteinList(proteins, containerId) {
            const container = document.getElementById(containerId);
            
            if (!proteins || proteins.length === 0) {
                container.innerHTML = '<div class="error">No protein data available</div>';
                updateDebugInfo('No protein data available to render');
                return;
            }
            
            let html = '';
            proteins.forEach(protein => {
                html += createProteinCard(protein);
            });
            
            container.innerHTML = html;
            updateDebugInfo(`Rendered ${proteins.length} protein cards`);
        }

        // Sort proteins by name
        function sortProteins(proteins, sortBy) {
            const sorted = [...proteins];
            
            if (sortBy === 'name') {
                return sorted.sort((a, b) => a.Protein_ID.localeCompare(b.Protein_ID));
            }
            
            return sorted;
        }

        // Sort results
        function sortResults(sortBy) {
            currentSort = sortBy;
            const sortedResults = sortProteins(currentResults, sortBy);
            renderProteinList(sortedResults, 'search-results-list');
        }

        // Clear search and show intro
        function clearSearch() {
            updateDebugInfo('Clearing search filters');
            document.getElementById('searchInput').value = '';
            document.getElementById('geneTypeFilter').value = '';
            document.getElementById('organismFilter').value = '';
            
            // Show intro, hide results
            document.getElementById('browse-intro').style.display = 'block';
            document.getElementById('search-results').style.display = 'none';
        }

        // Create protein card HTML
        function createProteinCard(protein) {
            // Escape special characters to prevent XSS and syntax errors
            const safeProteinId = protein.Protein_ID.replace(/'/g, "\\'");
            const proteinImage = getProteinImage(protein.Protein_ID);
            
            return `
                <div class="protein-card" onclick="showProteinPage('${safeProteinId}')">
                    <div class="card-image">
                        <img src="${proteinImage}" alt="${protein.Protein_ID}" loading="lazy" 
                             onerror="this.src='images/protein-placeholder.png'; this.alt='Image not available'">
                    </div>
                    <div class="card-content">
                        <h3>${protein.Protein_ID}</h3>
                        <div class="protein-meta">
                            <div class="meta-item"><strong>Organism:</strong> <span>${protein.Taxonomic_Name}</span></div>
                            <div class="meta-item"><strong>Gene Type:</strong> <span>${protein.Gene_Type}</span></div>
                            <div class="meta-item"><strong>Length:</strong> <span>${protein.Protein_Length} aa</span></div>
                            <div class="meta-item"><strong>Stability:</strong> <span>${protein.Stability}</span></div>
                        </div>
                        <p><strong>Localization:</strong> <span>${protein.Localisation} (Score: ${protein.localisation_Score})</span></p>
                        <button class="view-btn" onclick="event.stopPropagation(); showProteinPage('${safeProteinId}')">
                            View Details
                        </button>
                    </div>
                </div>
            `;
        }

        // Page navigation functions
        function showHomePage() {
            updateDebugInfo('Showing Home page');
            hideAllPages();
            document.getElementById('hero-section').style.display = 'block';
            document.getElementById('features-section').style.display = 'block';
            currentPage = 'home';
            updateNavigation('home');
            window.history.pushState({ page: 'home' }, '', window.location.pathname);
        }

        function showAdvancedSearchPage() {
            updateDebugInfo('Showing Advanced Search page');
            hideAllPages();
            document.getElementById('advanced-search-page').style.display = 'block';
            currentPage = 'advanced-search';
            updateNavigation('advanced-search');
            window.history.pushState({ page: 'advanced-search' }, '', window.location.pathname + '#search');
            
            // Reset to intro view
            clearSearch();
        }

        function showDesignMethodsPage() {
            updateDebugInfo('Showing Design Methods page');
            hideAllPages();
            document.getElementById('design-methods-page').style.display = 'block';
            currentPage = 'design-methods';
            updateNavigation('design-methods');
            window.history.pushState({ page: 'design-methods' }, '', window.location.pathname + '#methods');
        }

        function showPublicationsPage() {
            updateDebugInfo('Showing Publications page');
            hideAllPages();
            document.getElementById('publications-page').style.display = 'block';
            currentPage = 'publications';
            updateNavigation('publications');
            window.history.pushState({ page: 'publications' }, '', window.location.pathname + '#publications');
        }

        function showContactPage() {
            updateDebugInfo('Showing Contact page');
            hideAllPages();
            document.getElementById('contact-page').style.display = 'block';
            currentPage = 'contact';
            updateNavigation('contact');
            window.history.pushState({ page: 'contact' }, '', window.location.pathname + '#contact');
        }

        function showProteinPage(proteinId) {
            updateDebugInfo(`Showing protein page: ${proteinId}`);
            const protein = proteinData.find(p => p.Protein_ID === proteinId);
            if (!protein) {
                showError('Protein data not found');
                updateDebugInfo(`ERROR: Protein ${proteinId} not found`);
                return;
            }

            currentProtein = proteinId;
            
            // Hide all pages, show protein page
            hideAllPages();
            document.getElementById('protein-page').style.display = 'block';
            
            // Update page content
            document.getElementById('protein-id').textContent = protein.Protein_ID;
            document.getElementById('protein-description').textContent = `${protein.Taxonomic_Name} ‚Ä¢ ${protein.Gene_Type}`;
            
            // Add protein image to the header
            const proteinHeader = document.querySelector('.protein-header');
            let proteinImg = document.getElementById('protein-image');
            if (!proteinImg) {
                proteinImg = document.createElement('img');
                proteinImg.id = 'protein-image';
                proteinImg.alt = protein.Protein_ID;
                proteinImg.style.maxWidth = '300px';
                proteinImg.style.margin = '20px auto';
                proteinImg.style.display = 'block';
                proteinImg.style.borderRadius = '8px';
                proteinImg.style.boxShadow = '0 2px 8px rgba(0,0,0,0.2)';
                proteinHeader.appendChild(proteinImg);
            }
            proteinImg.src = getProteinImage(proteinId);
            proteinImg.onerror = function() {
                this.src = 'images/protein-placeholder.png';
                this.alt = 'Image not available';
            };
            
            // Render protein details
            renderProteinDetails(protein);
            
            // Render sequences
            document.getElementById('original-sequence').textContent = protein.Original_Gene_Sequence || 'N/A';
            document.getElementById('dark-sequence').textContent = protein.Dark_Gene_Sequence || 'N/A';
            document.getElementById('protein-sequence').textContent = protein.Protein_Sequence || 'N/A';
            
            // Update URL
            window.history.pushState({ protein: proteinId }, '', window.location.pathname + '#protein-' + proteinId);
        }

        function hideAllPages() {
            // Hide hero and features sections
            document.getElementById('hero-section').style.display = 'none';
            document.getElementById('features-section').style.display = 'none';
            
            // Hide all content pages
            const pages = document.querySelectorAll('.content-page, .protein-page');
            pages.forEach(page => {
                page.style.display = 'none';
            });
        }

        function updateNavigation(activePage) {
            const navLinks = document.querySelectorAll('.nav-menu a');
            navLinks.forEach(link => {
                link.classList.remove('active');
            });
            
            // Map page names to link indices
            const pageMap = {
                'home': 0,
                'advanced-search': 1,
                'design-methods': 2,
                'publications': 3,
                'contact': 4
            };
            
            // Activate the correct link
            if (pageMap[activePage] !== undefined) {
                navLinks[pageMap[activePage]].classList.add('active');
            }
        }

        // Handle routing
        function setupRouting() {
            // Handle direct URL access and routing
            const handleRouting = () => {
                const url = new URL(window.location.href);
                const path = url.pathname;
                const hash = url.hash;

                console.log('Current path:', path);
                console.log('Current hash:', hash);
                updateDebugInfo(`Routing: path=${path}, hash=${hash}`);

                // Handle hash-based routing (for sharing URLs)
                if (hash) {
                    if (hash === '#search') {
                        showAdvancedSearchPage();
                        return;
                    } else if (hash === '#methods') {
                        showDesignMethodsPage();
                        return;
                    } else if (hash === '#publications') {
                        showPublicationsPage();
                        return;
                    } else if (hash === '#contact') {
                        showContactPage();
                        return;
                    } else if (hash.startsWith('#protein-')) {
                        const proteinId = hash.replace('#protein-', '');
                        if (proteinData && proteinData.find(p => p.Protein_ID === proteinId)) {
                            showProteinPage(proteinId);
                            return;
                        }
                    }
                }

                // Default to home page
                showHomePage();
            };

            // Handle initial load
            handleRouting();

            // Handle browser back/forward buttons
            window.addEventListener('popstate', handleRouting);
        }

        // Render protein details
        function renderProteinDetails(protein) {
            const grid = document.getElementById('protein-details-grid');
            
            const details = [
                { label: 'Taxonomic Name', value: protein.Taxonomic_Name },
                { label: 'Gene Type', value: protein.Gene_Type },
                { label: 'NCBI Gene Symbol', value: protein.NCBI_Gene_Symbol || 'N/A' },
                { label: 'NCBI Gene Description', value: protein.NCBI_Gene_Description || 'N/A' },
                { label: 'Sequence Similarity Status', value: protein.Sequence_Similarity_Status },
                { label: 'Chromosome', value: protein.Chromosomes || 'N/A' },
                { label: 'Location', value: `${protein.Location_Start} - ${protein.Location_Stop} (${protein.Gene_Orientation || 'N/A'})` },
                { label: 'Protein Length', value: `${protein.Protein_Length} amino acids` },
                { label: 'Molecular Weight', value: formatMolecularWeight(protein.Molecular_Weight) },
                { label: 'Theoretical pI', value: protein.Theoretical_pI || 'N/A' },
                { label: 'Instability Index', value: protein.Instability_Index || 'N/A' },
                { label: 'Stability', value: protein.Stability },
                { label: 'Aliphatic Index', value: protein.Aliphatic_Index || 'N/A' },
                { label: 'GRAVY', value: protein.GRAVY || 'N/A' },
                { label: 'Localization', value: `${protein.Localisation} (Score: ${protein.localisation_Score})` },
                { label: 'Pfam Domain', value: protein.Pfam_Domain || 'N/A' },
                { label: 'Structural Similarity', value: protein.Structural_Similarity || 'N/A' },
                { label: 'Taxonomic ID', value: protein.Taxonomic_ID || 'N/A' }
            ];

            let html = '';
            details.forEach(detail => {
                if (detail.value && detail.value !== 'N/A' && detail.value !== '#') {
                    html += `
                        <div class="detail-item">
                            <strong>${detail.label}</strong>
                            <span>${detail.value}</span>
                        </div>
                    `;
                }
            });
            
            grid.innerHTML = html;
        }

        // Helper functions
        function getProteinImage(proteinId) {
            // Use local PNG images with the same name as Protein ID
            return `images/${proteinId}.png`;
        }

        function formatMolecularWeight(weight) {
            if (!weight || weight === '#' || weight === 'N/A') return 'N/A';
            const num = parseFloat(weight);
            if (isNaN(num)) return weight;
            if (num >= 1000) return (num / 1000).toFixed(1) + ' kDa';
            return num + ' Da';
        }

        // Show error message
        function showError(message) {
            const container = document.getElementById('proteins-list');
            container.innerHTML = `<div class="error">${message}</div>`;
        }
    </script>
</body>
</html>